[vagrant@kernel-update ~]$ script systemd.log
Script started, file is systemd.log
[vagrant@kernel-update ~]$ sudo su
[root@kernel-update vagrant]# cat /etc/sysconfig/watchlog
cat: /etc/sysconfig/watchlog: No such file or directory
[root@kernel-update vagrant]# touch /etc/sysconfig/watchlog
[root@kernel-update vagrant]# vi /etc/sysconfig/watchlog
[root@kernel-update vagrant]# cat /etc/sysconfig/watchlog
# Configuration file for my watchlog service
# Place it to /etc/sysconfig

# File and word in that file that we will be monit
WORD="ALERT"
LOG=/var/log/watchlog.log
[root@kernel-update vagrant]# touch /var/log/watchlog.log
[root@kernel-update vagrant]# vi /var/log/watchlog.log
[root@kernel-update vagrant]# vi /etc/sysconfig/watchlog
[root@kernel-update vagrant]# cat /var/log/watchlog.log
test test 'error'
[root@kernel-update vagrant]# touch /opt/watchlog.sh
[root@kernel-update vagrant]# vi /opt/watchlog.sh
[root@kernel-update vagrant]# chmod +x /opt/watchlog.sh
[root@kernel-update vagrant]# ls -la /etc/sys
sysconfig/          sysctl.d/           system-release      
sysctl.conf         systemd/            system-release-cpe  
[root@kernel-update vagrant]# ls -la /etc/systemd/system
total 8
drwxr-xr-x. 14 root root 4096 Apr 30  2020 .
drwxr-xr-x.  4 root root  151 Apr 30  2020 ..
drwxr-xr-x.  2 root root   32 Apr 30  2020 basic.target.wants
lrwxrwxrwx.  1 root root   57 Apr 30  2020 dbus-org.freedesktop.nm-dispatcher.service -> /usr/lib/systemd/system/NetworkManager-dispatcher.service
lrwxrwxrwx.  1 root root   37 Apr 30  2020 default.target -> /lib/systemd/system/multi-user.target
drwxr-xr-x.  2 root root   87 Apr 30  2020 default.target.wants
drwxr-xr-x.  2 root root   38 Apr 30  2020 dev-virtio\x2dports-org.qemu.guest_agent.0.device.wants
drwxr-xr-x.  2 root root   32 Apr 30  2020 getty.target.wants
drwxr-xr-x.  2 root root   35 Apr 30  2020 local-fs.target.wants
drwxr-xr-x.  2 root root 4096 Apr 30  2020 multi-user.target.wants
drwxr-xr-x.  2 root root   48 Apr 30  2020 network-online.target.wants
drwxr-xr-x.  2 root root   31 Apr 30  2020 remote-fs.target.wants
drwxr-xr-x.  2 root root   28 Apr 30  2020 sockets.target.wants
drwxr-xr-x.  2 root root  171 Apr 30  2020 sysinit.target.wants
drwxr-xr-x.  2 root root   44 Apr 30  2020 system-update.target.wants
drwxr-xr-x.  2 root root   58 Apr 30  2020 vmtoolsd.service.requires
[root@kernel-update vagrant]# ls -la /etc/systemd/system/
basic.target.wants/
dbus-org.freedesktop.nm-dispatcher.service
default.target
default.target.wants/
dev-virtio\x2dports-org.qemu.guest_agent.0.device.wants/
getty.target.wants/
local-fs.target.wants/
multi-user.target.wants/
network-online.target.wants/
remote-fs.target.wants/
sockets.target.wants/
sysinit.target.wants/
system-update.target.wants/
[root@kernel-update vagrant]# cat /etc/systemd/system/system-update.target.wants/systemd-readahead-drop.service 
#  This file is part of systemd.
#
#  systemd is free software; you can redistribute it and/or modify it
#  under the terms of the GNU Lesser General Public License as published by
#  the Free Software Foundation; either version 2.1 of the License, or
#  (at your option) any later version.

[Unit]
Description=Drop Read-Ahead Data
Documentation=man:systemd-readahead-replay.service(8)
ConditionPathExists=/.readahead

[Service]
Type=oneshot
ExecStart=/bin/rm -f /.readahead

[Install]
WantedBy=system-update.target
Also=systemd-readahead-collect.service
[root@kernel-update vagrant]# ls /etc/systemd/system/
basic.target.wants/
dbus-org.freedesktop.nm-dispatcher.service
default.target
default.target.wants/
dev-virtio\x2dports-org.qemu.guest_agent.0.device.wants/
getty.target.wants/
local-fs.target.wants/
multi-user.target.wants/
network-online.target.wants/
remote-fs.target.wants/
sockets.target.wants/
sysinit.target.wants/
system-update.target.wants/
[root@kernel-update vagrant]# ls /etc/systemd/system/
basic.target.wants/
dbus-org.freedesktop.nm-dispatcher.service
default.target
default.target.wants/
dev-virtio\x2dports-org.qemu.guest_agent.0.device.wants/
getty.target.wants/
local-fs.target.wants/
multi-user.target.wants/
network-online.target.wants/
remote-fs.target.wants/
sockets.target.wants/
sysinit.target.wants/
system-update.target.wants/
[root@kernel-update vagrant]# mkdir /etc/systemd/system/watchlog
[root@kernel-update vagrant]# touch /etc/systemd/system/watchlog/watchlog.service
[root@kernel-update vagrant]# chmod +x /etc/systemd/system/watchlog/watchlog.service
[root@kernel-update vagrant]# vi /etc/systemd/system/watchlog/watchlog.service
[root@kernel-update vagrant]# vi /etc/systemd/system/watchlog/watchlog.service
[root@kernel-update vagrant]# touch /etc/systemd/system/watchlog/watchlog.timer
[root@kernel-update vagrant]# chmod +x /etc/systemd/system/watchlog/watchlog.timer
[root@kernel-update vagrant]# vi /etc/systemd/system/watchlog/watchlog.timer
[root@kernel-update vagrant]# 
[root@kernel-update vagrant]# systemctl status watchlog.timer
Unit watchlog.timer could not be found.
[root@kernel-update vagrant]# systemctl start watchlog.timer
Failed to start watchlog.timer: Unit not found.
[root@kernel-update vagrant]# vi /etc/systemd/system/watchlog/watchlog.
watchlog.service  watchlog.timer    
[root@kernel-update vagrant]# mv /etc/systemd/system/watchlog/watchlog.service /etc/systemd/system
[root@kernel-update vagrant]# mv /etc/systemd/system/watchlog/watchlog.timer /etc/systemd/system
[root@kernel-update vagrant]# ls -la /etc/systemd/system/watchlog/
total 4
drwxr-xr-x.  2 root root    6 Mar 28 17:29 .
drwxr-xr-x. 15 root root 4096 Mar 28 17:29 ..
[root@kernel-update vagrant]# rmdir /etc/systemd/system/watchlog/
[root@kernel-update vagrant]# ls -la /etc/sys
sysconfig/          sysctl.conf         sysctl.d/           systemd/            system-release      system-release-cpe  
[root@kernel-update vagrant]# ls -la /etc/systemd/system/watchlog.
watchlog.service  watchlog.timer    
[root@kernel-update vagrant]# systemctl start watchlog.timer
[root@kernel-update vagrant]# 


[root@kernel-update vagrant]# tail -f /var/log/messages 
Mar 28 16:51:52 localhost systemd: Started Session 3 of user vagrant.
Mar 28 16:52:50 localhost su: (to root) vagrant on pts/1
Mar 28 16:55:59 localhost systemd-udevd: Network interface NamePolicy= disabled on kernel command line, ignoring.
Mar 28 17:01:01 localhost systemd: Created slice User Slice of root.
Mar 28 17:01:01 localhost systemd: Started Session 4 of user root.
Mar 28 17:05:28 localhost systemd: Starting Cleanup of Temporary Directories...
Mar 28 17:05:28 localhost systemd: Started Cleanup of Temporary Directories.
Mar 28 17:30:51 localhost systemd: Configuration file /etc/systemd/system/watchlog.timer is marked executable. Please remove executable permission bits. Proceeding anyway.
Mar 28 17:30:51 localhost systemd: Configuration file /etc/systemd/system/watchlog.service is marked executable. Please remove executable permission bits. Proceeding anyway.
Mar 28 17:30:51 localhost systemd: Started Run watchlog script every 30 second.
q^C
[root@kernel-update vagrant]# grep "timer" /var/log/messages 
Mar 28 16:50:22 localhost kernel: Command line: BOOT_IMAGE=/boot/vmlinuz-3.10.0-1127.el7.x86_64 root=UUID=1c419d6c-5064-4a2b-953c-05b2c67edb15 ro no_timer_check console=tty0 console=ttyS0,115200n8 net.ifnames=0 biosdevname=0 elevator=noop crashkernel=auto LANG=en_US.UTF-8
Mar 28 16:50:22 localhost kernel: Kernel command line: BOOT_IMAGE=/boot/vmlinuz-3.10.0-1127.el7.x86_64 root=UUID=1c419d6c-5064-4a2b-953c-05b2c67edb15 ro no_timer_check console=tty0 console=ttyS0,115200n8 net.ifnames=0 biosdevname=0 elevator=noop crashkernel=auto LANG=en_US.UTF-8
Mar 28 16:50:22 localhost kernel: RAPL PMU: API unit is 2^-32 Joules, 5 fixed counters, 10737418240 ms ovfl timer
Mar 28 17:30:51 localhost systemd: Configuration file /etc/systemd/system/watchlog.timer is marked executable. Please remove executable permission bits. Proceeding anyway.
[root@kernel-update vagrant]# chmod -x /etc/systemd/system/watchlog/watchlog.timer
chmod: cannot access '/etc/systemd/system/watchlog/watchlog.timer': No such file or directory
[root@kernel-update vagrant]# chmod -x /etc/systemd/system/watchlog.timer
[root@kernel-update vagrant]# chmod -x /etc/systemd/system/watchlog.
watchlog.service  watchlog.timer    
[root@kernel-update vagrant]# chmod -x /etc/systemd/system/watchlog.service 
[root@kernel-update vagrant]# grep "timer" /var/log/messages 
Mar 28 16:50:22 localhost kernel: Command line: BOOT_IMAGE=/boot/vmlinuz-3.10.0-1127.el7.x86_64 root=UUID=1c419d6c-5064-4a2b-953c-05b2c67edb15 ro no_timer_check console=tty0 console=ttyS0,115200n8 net.ifnames=0 biosdevname=0 elevator=noop crashkernel=auto LANG=en_US.UTF-8
Mar 28 16:50:22 localhost kernel: Kernel command line: BOOT_IMAGE=/boot/vmlinuz-3.10.0-1127.el7.x86_64 root=UUID=1c419d6c-5064-4a2b-953c-05b2c67edb15 ro no_timer_check console=tty0 console=ttyS0,115200n8 net.ifnames=0 biosdevname=0 elevator=noop crashkernel=auto LANG=en_US.UTF-8
Mar 28 16:50:22 localhost kernel: RAPL PMU: API unit is 2^-32 Joules, 5 fixed counters, 10737418240 ms ovfl timer
Mar 28 17:30:51 localhost systemd: Configuration file /etc/systemd/system/watchlog.timer is marked executable. Please remove executable permission bits. Proceeding anyway.
[root@kernel-update vagrant]# 
[root@kernel-update vagrant]# systemct status watchlog.timer
bash: systemct: command not found
[root@kernel-update vagrant]# systemctl status watchlog.timer
● watchlog.timer - Run watchlog script every 30 second
   Loaded: loaded (/etc/systemd/system/watchlog.timer; disabled; vendor preset: disabled)
   Active: active (elapsed) since Thu 2024-03-28 17:30:51 UTC; 3min 40s ago

Mar 28 17:30:51 kernel-update systemd[1]: Started Run watchlog script every 30 second.
[root@kernel-update vagrant]# tail -f /var/log/messages 
Mar 28 16:51:52 localhost systemd: Started Session 3 of user vagrant.
Mar 28 16:52:50 localhost su: (to root) vagrant on pts/1
Mar 28 16:55:59 localhost systemd-udevd: Network interface NamePolicy= disabled on kernel command line, ignoring.
Mar 28 17:01:01 localhost systemd: Created slice User Slice of root.
Mar 28 17:01:01 localhost systemd: Started Session 4 of user root.
Mar 28 17:05:28 localhost systemd: Starting Cleanup of Temporary Directories...
Mar 28 17:05:28 localhost systemd: Started Cleanup of Temporary Directories.
Mar 28 17:30:51 localhost systemd: Configuration file /etc/systemd/system/watchlog.timer is marked executable. Please remove executable permission bits. Proceeding anyway.
Mar 28 17:30:51 localhost systemd: Configuration file /etc/systemd/system/watchlog.service is marked executable. Please remove executable permission bits. Proceeding anyway.
Mar 28 17:30:51 localhost systemd: Started Run watchlog script every 30 second.
^C
[root@kernel-update vagrant]# tail -f /var/log/messages 
Mar 28 16:51:52 localhost systemd: Started Session 3 of user vagrant.
Mar 28 16:52:50 localhost su: (to root) vagrant on pts/1
Mar 28 16:55:59 localhost systemd-udevd: Network interface NamePolicy= disabled on kernel command line, ignoring.
Mar 28 17:01:01 localhost systemd: Created slice User Slice of root.
Mar 28 17:01:01 localhost systemd: Started Session 4 of user root.
Mar 28 17:05:28 localhost systemd: Starting Cleanup of Temporary Directories...
Mar 28 17:05:28 localhost systemd: Started Cleanup of Temporary Directories.
Mar 28 17:30:51 localhost systemd: Configuration file /etc/systemd/system/watchlog.timer is marked executable. Please remove executable permission bits. Proceeding anyway.
Mar 28 17:30:51 localhost systemd: Configuration file /etc/systemd/system/watchlog.service is marked executable. Please remove executable permission bits. Proceeding anyway.
Mar 28 17:30:51 localhost systemd: Started Run watchlog script every 30 second.
^C
[root@kernel-update vagrant]# systemctl status watchlog.service
● watchlog.service - My watchlog service
   Loaded: loaded (/etc/systemd/system/watchlog.service; static; vendor preset: disabled)
   Active: inactive (dead)
[root@kernel-update vagrant]# systemctl start watchlog.service
Job for watchlog.service failed because the control process exited with error code. See "systemctl status watchlog.service" and "journalctl -xe" for details.
[root@kernel-update vagrant]# journalctl -xe
Mar 28 17:36:58 kernel-update systemd[21289]: Failed at step EXEC spawning /opt/watchlog.sh: Exec format error
-- Subject: Process /opt/watchlog.sh could not be executed
-- Defined-By: systemd
-- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel
-- 
-- The process /opt/watchlog.sh could not be executed and failed.
-- 
-- The error number returned by this process is 8.
Mar 28 17:36:58 kernel-update systemd[1]: watchlog.service: main process exited, code=exited, status=203/EXEC
Mar 28 17:36:58 kernel-update systemd[1]: Failed to start My watchlog service.
-- Subject: Unit watchlog.service has failed
-- Defined-By: systemd
-- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel
-- 
-- Unit watchlog.service has failed.
-- 
-- The result is failed.
Mar 28 17:36:58 kernel-update systemd[1]: Unit watchlog.service entered failed state.
Mar 28 17:36:58 kernel-update systemd[1]: watchlog.service failed.
Mar 28 17:36:58 kernel-update polkitd[357]: Unregistered Authentication Agent for unix-process:21283:279460 (system bus name :1.46, object path /o
[root@kernel-update vagrant]# vi /opt/watchlog.sh 
[root@kernel-update vagrant]# tail -f /var/log/messages 
Mar 28 17:37:28 localhost systemd: watchlog.service: main process exited, code=exited, status=203/EXEC
Mar 28 17:37:28 localhost systemd: Failed to start My watchlog service.
Mar 28 17:37:28 localhost systemd: Unit watchlog.service entered failed state.
Mar 28 17:37:28 localhost systemd: watchlog.service failed.
Mar 28 17:38:28 localhost systemd: Starting My watchlog service...
Mar 28 17:38:28 localhost systemd: Failed at step EXEC spawning /opt/watchlog.sh: Exec format error
Mar 28 17:38:28 localhost systemd: watchlog.service: main process exited, code=exited, status=203/EXEC
Mar 28 17:38:28 localhost systemd: Failed to start My watchlog service.
Mar 28 17:38:28 localhost systemd: Unit watchlog.service entered failed state.
Mar 28 17:38:28 localhost systemd: watchlog.service failed.
Mar 28 17:39:28 localhost systemd: Starting My watchlog service...
Mar 28 17:39:28 localhost root: Thu Mar 28 17:39:28 UTC 2024: I found word, Master!
Mar 28 17:39:28 localhost systemd: Started My watchlog service.
^C

